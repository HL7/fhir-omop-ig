# Considerations when Transforming FHIR to OMOP
## Granularity of FHIR Data vs. OMOP Standardization
FHIR resources can contain detailed data, such as dosage adjustments or specific intervals for medication administration, which might not have direct counterparts in OMOP’s more generalized tables. An implication for data transformation is that this disparity means some FHIR data may be lost or generalized in the transformation process to OMOP.  This could impact specific use cases. When developing a data transformation from FHIR to OMOP, there is a need to document potential data losses resulting from a mismatch in source to target data granularity to inform data users about impacts to, and potential limitations this may cause in analyses.

## Impact of OMOP Standard Concepts & Domains
The OMOP Common Data Model is designed to permit aggregation of very large data sets, in either a central repository or via distributed network architecture(s). This usually means that multiple sources create data that compose any one OMOP instance.  Statistical analyses conducted on observational data require representation of sufficient numbers of patients to ensure evidence validity and reduce regional, care delivery service population or source system data capture biases.  Each data source may have unique schema, coding systems and or concept representations. The OMOP tables, divided into ‘domains’ and the OHDSI Standardized Vocabularies provide an aligned transformation target that addresses the heterogeneous nature of observational source systems generating data. Use of the OHDSI Standardized Vocabularies is required in OMOP implementations.

The OHDSI Standardized Vocabularies consolidate source coding systems by mapping to target OMOP concepts.  Each is designated as a Standard, Non-Standard or Classification concept. An important feature of the ‘Standard’ concepts is there is only one of these for any idea represented within an OMOP domain.  This permits unambiguous alignment of data generated in divergent source systems, each of which may utilize a variety of coding systems. Some source concepts map to more than one OMOP domain, and in these instances each domain target has unique identifiers assigned to it.  

In FHIR to OMOP transformations, it is not sufficient to evaluate the name of a FHIR resource and assume that all data residing in that resource will map to a single OMOP domain. It is a key design feature of OMOP to support one and only one Standard concept per domain, and that transformation to OMOP be achieved through evaluation of the source data for each concept to determine what an appropriate OMOP table and vocabulary transformation is appropriate.  For example, mapping FHIR Observation resources do not map uniformly to the OMOP Observation domain. Many map to the Measurement, Condition Occurrence or Procedure domains.  Accordingly, each concept within a FHIR Observation resource requires review of the OHDSI Standardized Vocabularies content to determine which one or more domain / concept_id pairs to assign in the OMOP CDM.
FHIR resources reference some terminologies (e.g., LOINC, SNOMED, RxNorm…) that align well with Standard concepts in the OHDSI Standardized Vocabularies. However, discrepancies arise when a code in FHIR lacks a direct counterpart or is represented differently in OMOP. Particularly this is true for HL7 native and maintained code systems utilized in FHIR.  Using The OHDSI Standardized Vocabularies mappings to Standard concepts is strongly recommended wherever possible.  Where no direct mapping exists, adding extension concept_ids namespaced to ‘2 Billion’ or above per OHDSI convention in a local instance can be leveraged.  As the OHDSI Standardized Vocabularies are continually being updated that include many community-contributed, former ‘2 Billonaire ‘ concepts, updating local data ingestion pipelines and legacy OMOP datastores routinely with the most recent version is also strongly recommended.

## Differentiating Between Patient-Reported and Clinician-Verified Data
FHIR resources such as MedicationStatement often contain patient-reported information, which may be less reliable than data verified or documented by clinicians. In contrast, OMOP’s data model does not consistently distinguish between data sources in a way that clearly conveys differences in reliability or verification status. Treating all records as equivalent can introduce interpretive challenges and potential bias, especially when patient-reported and clinician-verified records are analyzed together.

For example, a medication history reported directly by a patient may not carry the same evidentiary weight as a medication order formally documented by a prescribing clinician. To address this limitation, the Implementation Guide recommends using OMOP’s observation_type_concept_id or drug_type_concept_id fields to indicate the provenance of each record. By explicitly tagging records with their source, implementers can support analyses that require higher confidence in data accuracy or that need to filter data based on verification status. This practice improves transparency and helps maintain analytic rigor in research contexts where the reliability of the underlying data is critical.
